!function(){var e=function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e},t=Object.prototype.hasOwnProperty;"function"==typeof Symbol&&Symbol.iterator;var n=o,r=o.events={INSTALLED:"sw:installed",UPDATED:"sw:updated",REDUNDANT:"sw:redundant",POST_MESSAGE:"sw:postMessage",MESSAGE:"sw:message",SYNC:"sw:sync",NOTIFICATION_REQUEST:"sw:notificationRequest",ERROR:"log:error"};function o(t,n){return t=t||"/sw.js",n=n||{},function(o,i){i.on(o.events.DOMCONTENTLOADED,function(){if(n=e({scope:"/"},n),window.onmessage=function(e){i.emit(r.MESSAGE,{data:e.data,channel:"window",port:null})},window.MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(e){i.emit(r.MESSAGE,{data:e.data,channel:"messageChannel",port:"port1"})},a.port2.onmessage=function(e){i.emit(r.MESSAGE,{data:e.data,channel:"messageChannel",port:"port2"})}}i.on(r.NOTIFICATION_REQUEST,function(e){Notification.requestPermission(function(t){"function"==typeof t&&e(t)})}),navigator.serviceWorker&&navigator.onLine&&(navigator.serviceWorker.onmessage=function(e){i.emit(r.MESSAGE,{data:e.data,channel:"navigator.serviceWorker",port:null})},navigator.serviceWorker.register(t,n).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state?navigator.serviceWorker.controller?i.emit(r.UPDATED,e):i.emit(r.INSTALLED,e):"redundant"===t.state&&i.emit(r.REDUNDANT,e)}},e.sync&&e.sync.getTags().then(function(e){o.syncTags=e}).catch(function(e){i.emit(r.ERROR,e)})}).catch(function(e){i.emit(r.ERROR,e)}),navigator.serviceWorker.ready.then(function(e){new Promise(function(t){var n=e.active;"activated"!==n.state?(n.addEventListener("statechange",t,{once:!0}),i.on(r.POST_MESSAGE,function(e){n.postMessage(e)})):t()}).then(function(){e.navigationPreload&&e.navigationPreload.enable()}),i.on(r.SYNC,function(t){e.sync.register(t).then(function(){return e.sync.getTags()}).then(function(e){o.syncTags=e}).catch(function(e){i.emit(r.ERROR,e)})})}).catch(function(e){i.emit(r.ERROR,e)}))})}}"function"==typeof Symbol&&Symbol.iterator;var i=function(e){var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})};"function"==typeof Symbol&&Symbol.iterator;var a={},s="undefined"!=typeof window,u=s&&window.requestIdleCallback,c=function e(t,n){n=n||a;var r;return u?(r=window.requestIdleCallback(function(r){if(r.timeRemaining()<=10&&!r.didTimeout)return e(t,n);t(r)},n),window.cancelIdleCallback.bind(window,r)):s?(r=setTimeout(t,0),clearTimeout.bind(window,r)):void 0};"function"==typeof Symbol&&Symbol.iterator;var l,d=!0;try{l=window.performance,d="true"===window.localStorage.DISABLE_NANOTIMING||!l.mark}catch(e){}var f=function(e){if(d)return h;var t=(1e4*l.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;l.mark(n);function r(r){var o="end-"+t+"-"+e;l.mark(o),c(function(){var i=e+" ["+t+"]";l.measure(i,n,o),l.clearMarks(n),l.clearMarks(o),r&&r(e)})}return r.uuid=t,r};function h(e){e&&c(e)}var p=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}};"function"==typeof Symbol&&Symbol.iterator;var m=v;function v(e){if(!(this instanceof v))return new v(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}v.prototype.emit=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var o=f(this._name+"('"+e+"')"),i=this._listeners[e];return i&&i.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},v.prototype.on=v.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},v.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},v.prototype.once=function(e,t){var n=this;return this.on(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},v.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},v.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(p(e,n,1),!0):void 0}}},v.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},v.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},v.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t,r].concat(n):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var a=e[i];a.apply(a,n)}}},"function"==typeof Symbol&&Symbol.iterator;var y=/(noopener|noreferrer) (noopener|noreferrer)/,w=/^[\w-_]+:/;"function"==typeof Symbol&&Symbol.iterator;var b=function(){return window.location.pathname.replace(/\/$/,"")+window.location.hash.replace(/^#/,"/")},S=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],g=S.length,E=function(e,t){var n=e.nodeType,r=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,r=e.attributes,o=null,i=null,a=null,s=null,u=r.length-1;u>=0;--u)s=r[u],a=s.name,o=s.namespaceURI,i=s.value,o?(a=s.localName||a,t.getAttributeNS(o,a)!==i&&t.setAttributeNS(o,a,i)):t.hasAttribute(a)?t.getAttribute(a)!==i&&("null"===i||"undefined"===i?t.removeAttribute(a):t.setAttribute(a,i)):t.setAttribute(a,i);for(var c=n.length-1;c>=0;--c)!1!==(s=n[c]).specified&&(a=s.name,(o=s.namespaceURI)?(a=s.localName||a,e.hasAttributeNS(o,a)||t.removeAttributeNS(o,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var n=e.value,r=t.value;_(e,t,"checked"),_(e,t,"disabled"),n!==r&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===r?_(e,t,"selected"):"TEXTAREA"===r&&function(t,n){var r=e.value;if(r!==n.value&&(n.value=r),n.firstChild&&n.firstChild.nodeValue!==r){if(""===r&&n.firstChild.nodeValue===n.placeholder)return;n.firstChild.nodeValue=r}}(0,t),function(e,t){for(var n=0;n<g;n++){var r=S[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)};function _(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}"function"==typeof Symbol&&Symbol.iterator;var A=3,T=function(e,t){return function e(t,n){return n?t?t.isSameNode&&t.isSameNode(n)?n:t.tagName!==n.tagName?t:(E(t,n),function(t,n){for(var r,o,i,a,s=0,u=0;r=n.childNodes[u],o=t.childNodes[u-s],r||o;u++)if(o)if(r)if(N(o,r))(i=e(o,r))!==r&&(n.replaceChild(i,r),s++);else{a=null;for(var c=u;c<n.childNodes.length;c++)if(N(n.childNodes[c],o)){a=n.childNodes[c];break}a?((i=e(o,a))!==a&&s++,n.insertBefore(i,r)):o.id||r.id?(n.insertBefore(o,r),s++):(i=e(o,r))!==r&&(n.replaceChild(i,r),s++)}else n.appendChild(o),s++;else n.removeChild(r),u--}(t,n),n):null:t}(t,e)};function N(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===A&&e.nodeValue===t.nodeValue}"function"==typeof Symbol&&Symbol.iterator;var L=/([^?=&]+)(=([^&]*))?/g,O=function(e){var t={};return e.replace(/^.*\?/,"").replace(L,function(e,n,r,o){t[decodeURIComponent(n)]=decodeURIComponent(o)}),t};"function"==typeof Symbol&&Symbol.iterator;var R=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)C.call(n,r)&&(e[r]=n[r])}return e},C=Object.prototype.hasOwnProperty;"function"==typeof Symbol&&Symbol.iterator;var D=I;function I(){if(!(this instanceof I))return new I;this.trie={nodes:{}}}I.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,r){var o=t.hasOwnProperty(n)&&t[n];if(!1===o)return r;var i=null;return/^:|^\*/.test(o)?(r.nodes.hasOwnProperty("$$")?i=r.nodes.$$:(i={nodes:{}},r.nodes.$$=i),"*"===o[0]&&(r.wildcard=!0),r.name=o.replace(/^:|^\*/,"")):r.nodes.hasOwnProperty(o)?i=r.nodes[o]:(i={nodes:{}},r.nodes[o]=i),e(n+1,i)}(0,this.trie)},I.prototype.match=function(e){var t=e.replace(/^\//,"").split("/"),n={},r=function e(r,o){if(void 0!==o){var i=t[r];if(void 0===i)return o;if(o.nodes.hasOwnProperty(i))return e(r+1,o.nodes[i]);if(o.name){try{n[o.name]=decodeURIComponent(i)}catch(t){return e(r,void 0)}return e(r+1,o.nodes.$$)}if(o.wildcard){try{n.wildcard=decodeURIComponent(t.slice(r).join("/"))}catch(t){return e(r,void 0)}return o.nodes.$$}return e(r+1)}}(0,this.trie);if(r)return(r=R(r)).params=n,r},I.prototype.mount=function(t,n){var r=t.replace(/^\//,"").split("/"),o=null,i=null;if(1===r.length)i=r[0],o=this.create(i);else{var a=r.join("/");i=r[0],o=this.create(a)}e(o.nodes,n.nodes),n.name&&(o.name=n.name),o.nodes[""]&&(Object.keys(o.nodes[""]).forEach(function(e){"nodes"!==e&&(o[e]=o.nodes[""][e])}),e(o.nodes,o.nodes[""].nodes),delete o.nodes[""].nodes)},"function"==typeof Symbol&&Symbol.iterator;var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M=/file:\/\//.test("object"===("undefined"==typeof window?"undefined":P(window))&&window.location&&window.location.origin),k=new RegExp("^(file://|/)(.*.html?/?)?"),G=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),U=new RegExp("#"),V=new RegExp("[?].*$"),$=function(e){var t=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),r=D();return o._trie=r,o.on=function(e,t){return e=e||"/",t.route=e,t&&t._wayfarer&&t._trie?r.mount(e,t._trie.trie):r.create(e).cb=t,o},o.emit=o,o.match=i,o._wayfarer=!0,o;function o(e){var t=i(e),n=new Array(arguments.length);n[0]=t.params;for(var r=1;r<n.length;r++)n[r]=arguments[r];return t.cb.apply(t.cb,n)}function i(e){var t=r.match(e);if(t&&t.cb)return new a(t);var o=r.match(n);if(o&&o.cb)return new a(o);throw new Error("route '"+e+"' did not match")}function a(e){this.cb=e.cb,this.route=e.cb.route,this.params=e.params}}((e=e||{}).default||"/404"),n=e.curry||!1,r=null,o=null;return i.router=t,i.on=function(e,n){e=e.replace(/^[#/]/,""),t.on(e,n)},i;function i(e){return n?(i=e,(e=(i=M?i.replace(k,""):i.replace(G,"")).replace(V,"").replace(U,"/"))===o?r():(o=e,(r=t(e))())):t(e);var i}};"function"==typeof Symbol&&Symbol.iterator;var x=W,q={};function W(e){if(!(this instanceof W))return new W(e);e=e||{};var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hasWindow="undefined"!=typeof window,this._createLocation=b,this._loaded=!1,this._tree=null,this.router=$({curry:!0}),this.emitter=m("choo.emit");var n={events:this._events};this._hasWindow?(this.state=window.initialState?R(window.initialState,n):n,delete window.initialState):this.state=n,this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(e){t.state.title=e,t._hasWindow&&(document.title=e)})}W.prototype.route=function(e,t){var n=this;this.router.on(e,function(r){return function(){n.state.params=r,n.state.route=e;var o=f("choo.route('"+e+"')"),i=t(n.state,function(e,t){n.emitter.emit.apply(n.emitter,arguments)});return o(),i}})},W.prototype.use=function(e){var t="choo.use";t=e.storeName?t+"("+e.storeName+")":t;var n=f(t);e(this.state,this.emitter,this),n()},W.prototype.start=function(){var e=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){e.state.query=O(window.location.search),e._loaded&&(e.emitter.emit(e._events.RENDER),setTimeout(function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(e){}}.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(t){window.history.pushState(q,null,t),e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(t){window.history.replaceState(q,null,t),e.emitter.emit(e._events.NAVIGATE)}),window.onpopstate=function(){e.emitter.emit(e._events.POPSTATE)},e._hrefEnabled&&(t=function(t){var n=t.href;n!==window.location.href&&e.emitter.emit(e._events.PUSHSTATE,n)},n=void 0,n=n||window.document,window.addEventListener("click",function(e){if(!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.defaultPrevented)){var r=function e(t){if(t&&t!==n)return"a"!==t.localName||void 0===t.href?e(t.parentNode):t}(e.target);r&&(window.location.origin!==r.origin||r.hasAttribute("download")||"_blank"===r.getAttribute("target")&&y.test(r.getAttribute("rel"))||w.test(r.getAttribute("href"))||(e.preventDefault(),t(r)))}}))),this.state.href=this._createLocation(),this.state.query=O(window.location.search),this._tree=this.router(this.state.href),this.emitter.prependListener(e._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,r=null;return function(){null!==r||n||(n=!0,t(function(){n=!1;for(var t=r.length,o=new Array(t),i=0;i<t;i++)o[i]=r[i];e.apply(e,o),r=null})),r=arguments}}(function(){var t=f("choo.render");e.state.href=e._createLocation();var n=e.router(e.state.href),r=f("choo.morph");T(e._tree,n),r(),t()})),i(function(){e.emitter.emit(e._events.DOMCONTENTLOADED),e._loaded=!0}),this._tree;var t,n},W.prototype.mount=function(e){var t=this;i(function(){var n=f("choo.render"),r=t.start();t._tree="string"==typeof e?document.querySelector(e):e;var o=f("choo.morph");T(t._tree,r),o(),n()})},W.prototype.toString=function(e,t){return this.state=R(this.state,t||{}),this.state.href=e.replace(/\?.+$/,""),this.state.query=O(e),this.router(e).toString()};var j=function e(t,n){for(var r=0;r<n.length;r++){var o=n[r];if(Array.isArray(o))e(t,o);else{if(("number"==typeof o||"boolean"==typeof o||o instanceof Date||o instanceof RegExp)&&(o=o.toString()),"string"==typeof o){if(/^[\n\r\s]+$/.test(o))continue;if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=o;continue}o=document.createTextNode(o)}o&&o.nodeType&&t.appendChild(o)}}},H={exports:{}},F=x();F.use(n()),F.route("/",function(e,t){return t("DOMTitleChange","hello planet"),function(){var e=document.createElement("body");return e.setAttribute("class","sans-serif"),j(e,["\n      Hello planet\n    "]),e}()}),F.route("/other",function(e,t){return t("DOMTitleChange","hello planet"),function(){var e=document.createElement("body");return e.setAttribute("class","sans-serif"),j(e,["\n      Hello other\n    "]),e}()}),F.mount("body"),H=H.exports}();
//# sourceMappingURL=bundle.js.map